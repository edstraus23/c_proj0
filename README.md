# Documenting C Code with Doxygen (c_proj0)

This project demonstrates how to document C code from the DPDK Project using Doxygen. For further information about this open source project, refer to https://www.dpdk.org/. Open the **index.html** file in the **doxygen/html** directory to view autogenerated documentation.

**Note:** Files for this demonstration were pulled from the https://github.com/DPDK/dpdk repository, specifically the files from the lib/bbdev folder. This documentation is for demo purposes only.

## Documenting Code with Doxygen

One of the main objectives of this project was to show how to automatically document the C code by using Doxygen. 
I will provide some examples in the following sections on how to enable doxygen to automatically document the code. For additional information on Doxygen, refer to [Documenting the code](https://www.doxygen.nl/manual/docblocks.html).

### Install Doxygen

I am using Ubuntu for this demo. To install Doxygen for Ubuntu, follow the instructions from the following site:

[How to install Doxygen on Ubuntu](https://www.tutorialspoint.com/how-to-install-doxygen-on-ubuntu)

### Setting Up the Project Information

Add the following text to the main C code (in this case, rte_bbdev.c):

```
/**
 * @file rte_bbdev.c
 *
 * Wireless base band device abstraction APIs.
 *
 * @mainpage Documenting C Code from DPDK Project
 * 
 * @section description_main Description
 * This project documents C code from the DPDK Project using Doxygen. For further information
 * about this open source project, refer to https://www.dpdk.org/.
 *
 * @section notes_main Notes
 * Files for this demonstration were pulled from the https://github.com/DPDK/dpdk 
 * repository, specifically the files from the lib/bbdev folder.
 *
 * This documentation is for demo purposes only.
 *
 * SPDX-License-Identifier: BSD-3-Clause
 * Copyright(c) 2017 Intel Corporation
 */
```

### Setting Up the File Information

Add the following text to the file (in this case, rte_bbdev.h):

```
/**
 * @file rte_bbdev.h
 *
 * Wireless base band device abstraction APIs.
 *
 * This API allows an application to discover, configure and use a device to
 * process operations. An asynchronous API (enqueue, followed by later dequeue)
 * is used for processing operations.
 *
 * The functions in this API are not thread-safe when called on the same
 * target object (a device, or a queue on a device), with the exception that
 * one thread can enqueue operations to a queue while another thread dequeues
 * from the same queue.
 */
 ```
 
 ### Adding Information about Structures and Functions
 
 ```
 /** Device queue configuration structure */
struct rte_bbdev_queue_conf {
	int socket;  /**< NUMA socket used for memory allocation */
	uint32_t queue_size;  /**< Size of queue */
	uint8_t priority;  /**< Queue priority */
	bool deferred_start; /**< Do not start queue when device is started. */
	enum rte_bbdev_op_type op_type; /**< Operation type */
};

/**
 * Configure a queue on a device.
 * This function can be called after device configuration, and before starting.
 * It can also be called when the device or the queue is in the stopped state.
 *
 * @param dev_id
 *   The identifier of the device.
 * @param queue_id
 *   The index of the queue.
 * @param conf
 *   The queue configuration. If NULL, a default configuration will be used.
 *
 * @return
 *   - 0 on success
 *   - EINVAL if the identified queue size or priority are invalid
 *   - EBUSY if the identified queue or its device have already started
 */
int
rte_bbdev_queue_configure(uint16_t dev_id, uint16_t queue_id,
		const struct rte_bbdev_queue_conf *conf);
```

### Creating the Configuration File (Doxyfile)

In a terminal, perform the following steps (starting at a level above the src directory):
```
$ mkdir doxygen
$ cd doxygen
$ doxygen -g
```
These actions create the configuration file (Doxyfile).

### Editing the Configruation File

Make the following updates to the Doxyfile.

Change the project name from:

```
PROJECT_NAME           = "My Project"
```

to

```
PROJECT_NAME           = "Documenting C Code with Doxygen"
```

To use Javadoc style briefs (@brief) like shown above, change from:

```
JAVADOC_AUTOBRIEF      = NO
```

to

```
JAVADOC_AUTOBRIEF      = YES
```

To optimize the generated documentation for Java and C based source code, change from:

```
OPTIMIZE_OUTPUT_JAVA   = NO
```

to

```
OPTIMIZE_OUTPUT_JAVA   = YES
```

To extract all elements found in the source code, change from:

```
EXTRACT_ALL            = NO
```

to

```
EXTRACT_ALL            = YES
```

To make the documentation for some pages appear cleaner, change from:

```
HIDE_SCOPE_NAMES       = NO
```

to

```
HIDE_SCOPE_NAMES       = YES
```

To sort the elements in alphabetical order, change from:

```
SORT_BRIEF_DOCS        = NO
```

to

```
SORT_BRIEF_DOCS        = YES
```

To inform Doxygen where to find the C source code, change from

```
INPUT                  =
```

to

```
INPUT                  = ../lib/bbdev
```

To disable the Latex generation, change from:

```
GENERATE_LATEX         = YES
```

to

```
GENERATE_LATEX         = NO
```

Save your updated Doxyfile configuration file when you have completed your updates.

### Running Doxygen

From within the doxygen directory, run:

```
doxygen
```

This will display the tasks that it performs and any warnings or errors that occur during its execution. When complete, you should see an html directory that contains the autogenerated HTML documentation.

### Viewing the Documentation

Open **index.html** file in the **doxygen/html** directory to view the defintions for the functions and structures.
